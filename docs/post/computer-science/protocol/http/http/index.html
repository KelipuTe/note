<!doctype html><html lang=zh-cn data-theme=light><head><meta charset=utf-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#222" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.103.1"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32_32_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="HTTP"><meta itemprop=description content><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="/image/pid49256268.jpg"><meta itemprop=keywords content="computer-science(计算机科学),protocol(协议),http"><meta property="og:type" content="article"><meta property="og:title" content="HTTP"><meta property="og:description" content><meta property="og:image" content="/image/pid49256268.jpg"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="/post/computer-science/protocol/http/http/"><meta property="og:site_name" content="帕里特档案馆"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="西柊慧音"><meta property="article:published_time" content="2022-05-06 08:00:00 +0800 CST"><meta property="article:modified_time" content="2022-05-06 08:00:00 +0800 CST"><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.css><link rel=stylesheet href=/css/main.min.4da9279b6033ade10d67092d7bfb660265f9fa46c40974f17b13bfe235396546.css><style type=text/css>.post-footer,.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":false,"isHome":false,"isPage":true,"path":"http","permalink":"/post/computer-science/protocol/http/http/","title":"HTTP","waline":{"js":[{"alias":"waline","alias_name":"@waline/client","file":"dist/pageview.js","name":"pageview","version":"2.13.0"},{"alias":"waline","alias_name":"@waline/client","file":"dist/comment.js","name":"comment","version":"2.13.0"}]}}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>HTTP - 帕里特档案馆</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label=切换导航栏 role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>帕里特档案馆</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>重建中</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/about/ class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>111</span></a></li><li class="menu-item menu-item-commonweal"><a href=/404.html class=hvr-icon-pulse rel=section><i class="fa fa-heartbeat hvr-icon"></i>公益 404</a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><ul><li><a href=#http>HTTP</a></li><li><a href=#http09>HTTP/0.9</a></li><li><a href=#http10>HTTP/1.0</a><ul><li><a href=#http10-的问题>HTTP/1.0 的问题</a></li><li><a href=#get-与-post-的区别>GET 与 POST 的区别</a></li><li><a href=#get-方法的数据长度限制>GET 方法的数据长度限制</a></li><li><a href=#post-产生两个-tcp-数据包>POST 产生两个 TCP 数据包</a></li></ul></li><li><a href=#http11>HTTP/1.1</a><ul><li><a href=#持久连接>持久连接</a></li><li><a href=#管道机制>管道机制</a></li><li><a href=#http11-的问题>HTTP/1.1 的问题</a></li><li><a href=#http11-请求报文结构>HTTP/1.1 请求报文结构</a></li><li><a href=#http11-请求报文解析>HTTP/1.1 请求报文解析</a></li><li><a href=#http11-响应报文结构>HTTP/1.1 响应报文结构</a></li></ul></li><li><a href=#参考>参考</a></li></ul></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=西柊慧音 src=/imgs/img-lazy-loading.gif data-src=/image/pid49256268.jpg><p class=site-author-name itemprop=name>西柊慧音</p><div class=site-description itemprop=description></div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>111</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>19</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>67</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/KelipuTe title="Github → https://github.com/KelipuTe" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>Github</a></span>
<span class=links-of-social-item><a href=xhy_1365@sina.com title="E-Mail → xhy_1365@sina.com" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-envelope fa-fw hvr-icon"></i>E-Mail</a></span></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh class=cc-opacity rel=noopener target=_blank title=共享知识><img src=/imgs/img-lazy-loading.gif data-src=/imgs/cc/big/by_nc_sa.svg alt=共享知识></a></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://gitee.com/hugo-next/hugo-theme-next title=https://gitee.com/hugo-next/hugo-theme-next target=_blank>Hugo-NexT</a></li><li class=links-of-blogroll-item><a href=https://lisenhui.cn title=https://lisenhui.cn target=_blank>凡梦星尘空间站</a></li></ul></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a>
<a href=https://github.com/hugo-next rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=/post/computer-science/protocol/http/http/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/image/pid49256268.jpg"><meta itemprop=name content="西柊慧音"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="西柊慧音"><meta itemprop=description content></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="HTTP"><meta itemprop=description content="HTTP"></span><header class=post-header><h1 class=post-title itemprop="name headline">HTTP</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i></span>
<span class=post-meta-item-text>发表于：</span>
<time title="发表于：2022-05-06 08:00:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2022-05-06 08:00:00 +0800 CST">2022-05-06</time></span>
<span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i></span>
<span class=post-meta-item-text>分类于：</span>
<span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/protocol%E5%8D%8F%E8%AE%AE itemprop=url rel=index><span itemprop=name>protocol(协议)</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=字数><span class=post-meta-item-icon><i class="far fa-file-word"></i></span>
<span class=post-meta-item-text>字数：</span><span>3079</span></span>
<span class=post-meta-item title=阅读><span class=post-meta-item-icon><i class="far fa-clock"></i></span>
<span class=post-meta-item-text>阅读：&ap;</span>
<span>7分钟</span></span>
<span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="far fa-eye"></i></span>
<span class=post-meta-item-text>浏览：</span>
<span id=busuanzi_value_page_pv data-path=/post/computer-science/protocol/http/http/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class="post-body autonumber" itemprop=articleBody><h3 id=http>HTTP</h3><p>HTTP（HyperText Transfer Protocol，超文本传输协议）是基于 TCP、IP 协议的应用层网络通讯协议。它主要规定了发送端和接收端之间的通信格式（通信规范），不涉及数据包（packet）的传输。</p><p>HTTP 是基于 TCP 的，TCP 是基于字节流的，所以 HTTP 报文被接收后，在内存中就是一堆字节。</p><p>HTTP 协议默认使用 80 端口。发送端发起一个请求，建立一个到接收端指定端口的 TCP 连接。比如，在浏览器中输入域名，http://host，这时默认访问服务端的 80 端口。如果服务端的端口是 8080 端口，那么在浏览器中就需要输入，http://host:8080。</p><h3 id=http09>HTTP/0.9</h3><p>该版本极其简单，只有一个 GET 命令。协议规定，接收端只能响应 HTML 格式的字符串，不能响应别的格式。接收端响应报文发送完毕，就立刻关闭 TCP 连接。</p><p>请求报文：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>GET /index.html
</span></span></code></pre></div><p>响应报文：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>&lt;html&gt;
</span></span><span style=display:flex><span>  &lt;body&gt;hello, world&lt;/body&gt;
</span></span><span style=display:flex><span>&lt;/html&gt;
</span></span></code></pre></div><h3 id=http10>HTTP/1.0</h3><p>HTTP/1.0 增加了许多内容。</p><ul><li>1、改变请求和响应的格式。除了数据部分，每次通信都必须包括 HTTP Header（头信息）。</li><li>2、除了 GET 命令，还引入了 POST 命令和 HEAD 命令。</li><li>3、任何格式的内容都可以发送。如，文字、图像、视频、二进制文件等。</li><li>其他的新增功能还包括：Status Code（状态码）、Content-Type、Content-Encoding 等。</li></ul><p>1.0 版规定，头信息必须是 ASCII 码，后面的数据可以是任何格式。发送端请求的时候，可以使用 Accept 字段声明自己可以接受哪些数据格式。接收端响应的时候，必须使用 Content-Type 字段告诉发送端，数据是什么格式。</p><p>由于发送的数据可以是任何格式，因此可以把数据压缩后再发送。发送端在请求时，使用 Accept-Encoding 字段说明自己可以接受哪些压缩方法。接收端响应的时候，使用 Content-Encoding 字段说明数据的压缩方法</p><p>请求报文：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>GET /index.html HTTP/1.0
</span></span><span style=display:flex><span>Accept: */*
</span></span></code></pre></div><p>响应报文：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>HTTP/1.0 200 OK 
</span></span><span style=display:flex><span>Content-Type: text/html
</span></span><span style=display:flex><span>Content-Length: 46
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;html&gt;
</span></span><span style=display:flex><span>  &lt;body&gt;hello, world&lt;/body&gt;
</span></span><span style=display:flex><span>&lt;/html&gt;
</span></span></code></pre></div><h4 id=http10-的问题>HTTP/1.0 的问题</h4><p>HTTP/1.0 的主要问题是连接无法复用。每个 TCP 连接只能发送一个请求，接收端的响应报文发送完毕，就关闭连接。如果要请求其他资源，就必须再建立一个 TCP 连接。</p><p>在高延迟的场景下 TCP 的三次握手影响明显。TCP 的慢启动机制对文件类大数据量的请求影响较大（TCP 分包）。</p><p>有些浏览器在请求时，用了一个非标准的字段：<code>Connection: keep-alive</code>。这个字段要求服务端不要关闭 TCP 连接，以便其他请求复用。</p><p>客户端发起请求时带上这个字段，服务端同样回应这个字段。这样一个可以复用的 TCP 连接就建立了，直到客户端或服务器主动关闭连接。</p><h4 id=get-与-post-的区别>GET 与 POST 的区别</h4><p>从报文的角度：</p><p>HTTP 是基于TCP、IP 的，它只是规定传输内容的格式，然后通过 TCP 传输，依靠 IP 寻址。</p><p>GET 和 POST 只是 HTTP 协议中两种通信格式，没有实质的区别，都是字节。</p><p>不带参数时，最大区别就是第一行的方法名 GET 和 POST 不同。</p><p>带参数时，在约定中，GET 方法的参数应该放在 url 中，POST 方法参数应该放在 body 中。但是，这也只是约定，只要服务端能把数据解析出来，改成下面这样也是可以的。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>POST /index.php?name@xxx&amp;age@18 HTTP/1.1
</span></span></code></pre></div><p>从安全的角度：</p><p>HTTP 是基于 TCP、IP 的，它只是规定传输内容的格式，然后通过 TCP 传输，依靠 IP 寻址。</p><p>在整个过程中，不只是 GET 和 POST，其他的方法也一样，传输内容都是明文的。也就是，任何的中间人，都可以进行拦截，获取请求和响应的数据。</p><p>想要安全传输就必须，在使用 TCP 之前，对要传输的数据进行加密（HTTPS）。</p><h4 id=get-方法的数据长度限制>GET 方法的数据长度限制</h4><p>HTTP 协议没有 url 和 body 的长度限制，大多数对 url 的限制都是浏览器和服务端做的。因为太大的数据量对浏览器和服务端都是很大负担。</p><h4 id=post-产生两个-tcp-数据包>POST 产生两个 TCP 数据包</h4><p>HTTP 协议中没有明确的说明 POST 会产生两个 TCP 数据包。header 和 body 分开发送，一般是程序自发的行为。</p><p>比如，在使用 curl 进行 POST 请求的时候，当要传输的数据大于 1024 字节的时候，curl 并不会直接就发起 POST 请求，而是会分为俩步：</p><ul><li>1、发送一个只有请求头部的请求，请求头部包含 Expect:100-continue 字段，询问服务端使用愿意接受数据。</li><li>2、当接收到服务端响应的对 100-continue 的应答以后，才把 body 发送给服务器。</li></ul><p>但是，并不是所有的服务端都会正确应答 100-continue 字段。比如 lighttpd，就会返回 417 Expectation Failed ，造成错误。</p><h3 id=http11>HTTP/1.1</h3><p>HTTP/1.1 由 IETF（The Internet Engineering Task Force、国际互联网工程任务组） 的 RFC 2616 定义。</p><ul><li><p><a href=https://www.rfc-editor.org/rfc/rfc2616 title=https://www.rfc-editor.org/rfc/rfc2616 rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://www.rfc-editor.org/rfc/rfc2616
<i class="fa fa-external-link-alt"></i></a></p></li><li><p>HTTP/1.1 新增了许多动词方法：PUT、DELETE、PATCH。</p></li><li><p>新增了身份认证、状态管理、Cache 缓存等机制相关的字段。新增的 Range 和 Content-Range 字段用于断点续传。</p></li><li><p>新增 Host 字段，用来指定服务器的域名。有了 Host 字段，就可以将请求发往同一台服务器上的不同网站。</p></li></ul><h4 id=持久连接>持久连接</h4><p>HTTP/1.1 最大的变化，是引入了 persistent connection（持久连接），即 TCP 连接默认不关闭，可以被多个请求复用，不用声明 Connection: keep-alive。</p><p>发送端和接收端发现对方一段时间没有活动，就可以主动关闭连接。不过，规范的做法是，发送端在最后一个请求时，发送 Connection: close，明确要求接收端关闭 TCP 连接。</p><p>目前，对于同一个域名，大多数浏览器允许同时建立 6 个持久连接。</p><h4 id=管道机制>管道机制</h4><p>1.1 版本引入了 pipe lining（管道机制），即在同一个 TCP 连接里面，发送端可以同时发送多个请求。这样就进一步改进了 HTTP 协议的效率。</p><p>举例来说，发送端需要请求两个资源。以前的做法是，在同一个 TCP 连接里面，先发送 A 请求，然后等待接收端做出回应，收到后再发出 B 请求。</p><p>管道机制则是允许发送端同时发出 A 请求和 B 请求，但是接收端还是按照顺序，先回应 A 请求，完成后再回应 B 请求。</p><h4 id=http11-的问题>HTTP/1.1 的问题</h4><h5 id=队头堵塞>队头堵塞</h5><p>虽然 HTTP/1.1 允许复用 TCP 连接，但是同一个 TCP 连接里面，所有的数据通信是按次序进行的。服务器只有处理完一个回应，才会进行下一个回应。要是前面的回应特别慢，后面就会有许多请求排队等着。这称为 head-of-line blocking（队头堵塞）。</p><p>为了避免这个问题，只有两种方法：一是减少请求数，二是同时多开持久连接。这导致了很多的网页优化技巧。比如，合并脚本和样式表、将图片嵌入 CSS 代码、domain sharding（域名分片）等。</p><h5 id=无状态>无状态</h5><ul><li>无状态的好处是，接收端不需要记录状态信息。</li><li>无状态的坏处是，关联性的操作每次都需要验证（可以借助 Cookie 解决）。</li></ul><h5 id=明文传输>明文传输</h5><ul><li>明文传输的好处是方便解析，省掉了加密的时间。</li><li>明文传输的坏处是，明文的数据不安全。</li></ul><h4 id=http11-请求报文结构>HTTP/1.1 请求报文结构</h4><ul><li>Content-Type，请求体数据类型。</li></ul><p>请求体需要通过 Content-Type 字段判断是那种数据格式（json，xml 等）</p><ul><li>Content-Length，请求体长度。</li></ul><p>在 1.0 版本中，Content-Length 字段不是必需的，因为浏览器发现服务器关闭了 TCP 连接，就表明收到的数据包已经全了。但是在 1.1 版本中，一个 TCP 连接现在可以传送多个报文，当 TCP 连接连续接收多个 HTTP 报文时。Content-Length 字段可以确定某个 HTTP 报文请求体的结尾在哪里。这样就不会误读下一个 HTTP 报文的头部，造成数据混乱。</p><p>使用 Content-Length 字段的前提条件是，接收端发送回应之前，必须知道回应的数据长度。
对于一些很耗时的动态操作来说，这意味着，接收端要等到所有操作完成，才能发送数据，显然这样的效率不高。</p><p>更好的处理方法是，产生一块数据，就发送一块，采用 stream（流）模式取代 buffer（缓存）模式。因此，1.1 版本规定可以不使用 Content-Length 字段，而使用 chunked transfer encoding（分块传输编码）。</p><p>只要请求或者响应的头部信息有 Transfer-Encoding 字段。<code>Transfer-Encoding: chunked</code>，就表明回应将由数量未定的数据块组成。</p><p>每个非空的数据块之前，会有一个 16 进制的数值，表示这个块的长度。最后是一个大小为 0 的块，就表示本次回应的数据发送完了。</p><h4 id=http11-请求报文解析>HTTP/1.1 请求报文解析</h4><p>一般通过两个连续的 <code>\r\n</code> 判断请求头部和请求体分隔的位置。</p><ul><li>请求头部内部每行的数据都通过 <code>\r\n</code> 分隔。</li><li>请求体的长度通过请求头部的 Content-Length 字段获取，然后就可以从缓冲区中截取请求体的数据了。</li></ul><h4 id=http11-响应报文结构>HTTP/1.1 响应报文结构</h4><p>五大类 HTTP 状态码：</p><ul><li>1xx，提示信息</li><li>2xx，成功</li><li>3xx，重定向</li><li>4xx，发送端错误</li><li>5xx，接收端错误</li></ul><h3 id=参考>参考</h3><ul><li><a href=https://www.rfc-editor.org/rfc/rfc2616 title=https://www.rfc-editor.org/rfc/rfc2616 rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://www.rfc-editor.org/rfc/rfc2616
<i class="fa fa-external-link-alt"></i></a></li><li><a href=https://xiaolincoding.com/ title=小林coding rel="noopener external nofollow noreferrer" target=_blank class=exturl>小林coding
<i class="fa fa-external-link-alt"></i></a><ul><li><a href=https://xiaolincoding.com/network/ title=图解网络 rel="noopener external nofollow noreferrer" target=_blank class=exturl>图解网络
<i class="fa fa-external-link-alt"></i></a></li></ul></li></ul></div><footer class=post-footer><div class=post-tags><a href=/tags/computer-science%e8%ae%a1%e7%ae%97%e6%9c%ba%e7%a7%91%e5%ad%a6>computer-science(计算机科学)</a>
<a href=/tags/protocol%e5%8d%8f%e8%ae%ae>protocol(协议)</a>
<a href=/tags/http>http</a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=post-copyright><img src=/imgs/cc/cc.svg width=75 height=75 align=right><ul><li class=post-copyright-title><strong>文章标题：</strong>
HTTP</li><li class=post-copyright-author><strong>本文作者：</strong>
西柊慧音</li><li class=post-copyright-link><strong>本文链接：</strong>
<a id=post-cr-link href=/post/computer-science/protocol/http/http/ title=HTTP>/post/computer-science/protocol/http/http/</a></li><li class=post-copyright-license><strong>版权声明：</strong>
本博客所有文章除特别声明外，均采用 <i class="fab fa-fw fa-creative-commons"></i><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/computer-science/database/change-data-capture/ rel=next title="Change Data Capture"><i class="fa fa-chevron-left"></i> Change Data Capture</a></div><div class="post-nav-prev post-nav-item"><a href=/post/computer-science/protocol/http/https/ rel=prev title=HTTPS>HTTPS
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy;
<span itemprop=copyrightYear>2020 - 2023</span>
<span class=with-love><i class="fa fa-heart"></i></span>
<span class=author itemprop=copyrightHolder>西柊慧音</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.103.1 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.4.1 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div></div></footer><script type=text/javascript src=https://cdn.staticfile.org/animejs/3.2.1/anime.min.js defer></script>
<script type=text/javascript src=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.js defer></script>
<script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":true,"save":"manual"},"busuanzi":{"pageview":true},"copybtn":true,"darkmode":false,"giscus":{"cfg":{"category":"Comments","categoryid":null,"emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"username/repo-name","repoid":null,"theme":"preferred_color_scheme"},"js":"https://giscus.app/client.js"},"hostname":"/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"statis":{"enable":false,"plugin":"busuanzi"},"vendor":{"plugins":"qiniu","router":"https://cdn.staticfile.org"},"version":"4.4.1","waline":{"cfg":{"comment":true,"emoji":false,"imguploader":false,"pageview":false,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"serverurl":null,"sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"waline","file":"dist/waline.css","name":"@waline/client","version":"2.13.0"},"js":{"alias":"waline","file":"dist/waline.js","name":"@waline/client","version":"2.13.0"}}}</script><script type=text/javascript src=/js/main.min.c997eeae723f2fcee19ae5066fcc64a49cefb92ddb75904efdb69a223e5a6740.js defer></script></body></html>