<!doctype html><html lang=zh-cn data-theme=light><head><meta charset=utf-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#222" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.103.1"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32_32_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="终端和控制台"><meta itemprop=description content><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="/image/pid49256268.jpg"><meta itemprop=keywords content="computer-science(计算机科学),linux"><meta property="og:type" content="article"><meta property="og:title" content="终端和控制台"><meta property="og:description" content><meta property="og:image" content="/image/pid49256268.jpg"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="/post/computer-science/terminal_console/"><meta property="og:site_name" content="帕里特档案馆"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="西柊慧音"><meta property="article:published_time" content="2023-02-28 08:00:00 +0800 CST"><meta property="article:modified_time" content="2023-02-28 08:00:00 +0800 CST"><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.css><link rel=stylesheet href=/css/main.min.4da9279b6033ade10d67092d7bfb660265f9fa46c40974f17b13bfe235396546.css><style type=text/css>.post-footer,.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":false,"isHome":false,"isPage":true,"path":"terminal_console","permalink":"/post/computer-science/terminal_console/","title":"终端和控制台","waline":{"js":[{"alias":"waline","alias_name":"@waline/client","file":"dist/pageview.js","name":"pageview","version":"2.13.0"},{"alias":"waline","alias_name":"@waline/client","file":"dist/comment.js","name":"comment","version":"2.13.0"}]}}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>终端和控制台 - 帕里特档案馆</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label=切换导航栏 role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>帕里特档案馆</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>重建中</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/about/ class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>51</span></a></li><li class="menu-item menu-item-commonweal"><a href=/404.html class=hvr-icon-pulse rel=section><i class="fa fa-heartbeat hvr-icon"></i>公益 404</a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#前言>前言</a></li><li><a href=#资料>资料</a></li><li><a href=#正文>正文</a><ul><li><a href=#终端>终端</a></li><li><a href=#控制台>控制台</a></li><li><a href=#物理终端>物理终端</a></li><li><a href=#软件仿真终端>软件仿真终端</a></li><li><a href=#伪终端>伪终端</a><ul><li><a href=#ssh>ssh</a></li><li><a href=#键盘和显示器>键盘和显示器</a></li></ul></li><li><a href=#tty>TTY</a></li></ul></li><li><a href=#参考reference>参考（reference）</a></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=西柊慧音 src=/imgs/img-lazy-loading.gif data-src=/image/pid49256268.jpg><p class=site-author-name itemprop=name>西柊慧音</p><div class=site-description itemprop=description></div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>51</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>10</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>43</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/KelipuTe title="Github → https://github.com/KelipuTe" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>Github</a></span>
<span class=links-of-social-item><a href=xhy_1365@sina.com title="E-Mail → xhy_1365@sina.com" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-envelope fa-fw hvr-icon"></i>E-Mail</a></span></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh class=cc-opacity rel=noopener target=_blank title=共享知识><img src=/imgs/img-lazy-loading.gif data-src=/imgs/cc/big/by_nc_sa.svg alt=共享知识></a></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://gitee.com/hugo-next/hugo-theme-next title=https://gitee.com/hugo-next/hugo-theme-next target=_blank>Hugo-NexT</a></li><li class=links-of-blogroll-item><a href=https://lisenhui.cn title=https://lisenhui.cn target=_blank>凡梦星尘空间站</a></li></ul></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a>
<a href=https://github.com/hugo-next rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=/post/computer-science/terminal_console/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/image/pid49256268.jpg"><meta itemprop=name content="西柊慧音"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="西柊慧音"><meta itemprop=description content></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="终端和控制台"><meta itemprop=description content="终端；控制台；物理终端；软件仿真终端；伪终端；TTY；"></span><header class=post-header><h1 class=post-title itemprop="name headline">终端和控制台</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i></span>
<span class=post-meta-item-text>发表于：</span>
<time title="发表于：2023-02-28 08:00:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2023-02-28 08:00:00 +0800 CST">2023-02-28</time></span>
<span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i></span>
<span class=post-meta-item-text>分类于：</span>
<span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/computer-science%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6 itemprop=url rel=index><span itemprop=name>computer-science(计算机科学)</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=字数><span class=post-meta-item-icon><i class="far fa-file-word"></i></span>
<span class=post-meta-item-text>字数：</span><span>3389</span></span>
<span class=post-meta-item title=阅读><span class=post-meta-item-icon><i class="far fa-clock"></i></span>
<span class=post-meta-item-text>阅读：&ap;</span>
<span>7分钟</span></span>
<span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="far fa-eye"></i></span>
<span class=post-meta-item-text>浏览：</span>
<span id=busuanzi_value_page_pv data-path=/post/computer-science/terminal_console/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class="post-body autonumber" itemprop=articleBody><h2 id=前言>前言</h2><p>交叉笔记：
<a href=/post/computer-science/operating-system/linux/process02 title="init 进程、进程间关系、作业、会话、守护进程">init 进程、进程间关系、作业、会话、守护进程</a></p><h2 id=资料>资料</h2><ul><li><a href=/drawio/computer-science/terminal_console.drawio.html>terminal_console.drawio.html</a></li></ul><h2 id=正文>正文</h2><h3 id=终端>终端</h3><p>计算机终端（computer terminal）是与计算机相连的一种输入输出设备。</p><p>早期有一种叫电传打字机的设备，它是一台独立于计算机的机器，通过物理线缆与计算机连接，可以完成计算机的输入输出功能。电传打字机的英文是 Teletype 或 Teletypewriter，缩写是 TTY，所以 TTY 也泛指计算机的终端设备。后来，电传打字机被键盘和显示器取代。</p><p>但是不管是电传打字机还是键盘和显示器，都是作为计算机的终端设备存在的。电传打字机属于物理终端。现在物理终端基本上已经不用了。图形界面出现之前，键盘和显示器的组合属于软件仿真终端，也就是软件模拟出来的终端。图形界面出现之后，键盘和显示器的组合演变成了伪终端，但是软件仿真终端还是可以用的。</p><h3 id=控制台>控制台</h3><p>这里以数控机床为例。数控机床可能有一个独立出来一整块，然后上面有很多按钮的地方，这些按钮可以直接控制机床上的设备。如果这地方是直接在机床表面的，就叫控制面板。如果这地方是被一个柜子锁起来的，就叫控制箱。如果这地方看上去像个台子，就叫控制台（console）。</p><p>控制台和终端其实不是一个东西。控制台是计算机本身就有的设备，而终端不是计算机本身就有的设备。控制台应该只有一个，但是终端可以有多个。计算机的控制台理论上应该是电源开关和电源灯那些玩意，电源开关是可以直接控制计算机的。终端是通过接口接上去的，终端和计算机本身的运行没有关系，它就是个额外的输入输出设备。</p><p>这里用 ubuntu 系统和 windows 系统为例。计算机刚启动的时候，是可以通过键盘直接控制计算机的，而且会输出内核的信息到显示器上。这个时候的键盘和显示器就类似于控制台。</p><p>当计算机启动完成，进入操作系统的桌面后，这时是可以开很多的命令行窗口的。这些命令行窗口里面不会输出内核的信息，而且可以各自独立的接收命令输入，然后执行程序并返回输出。这个时候的键盘和显示器就是终端。</p><p>不过，现在的控制台和终端都由硬件概念逐渐演化成了软件的概念。简单的说，第一个启动的，会输出内核的信息的那个终端就称为控制台，其他的终端就是终端。</p><h3 id=物理终端>物理终端</h3><p>这里用电传打字机为例，画了基本的软硬件结构和交互。见图：<strong>terminal_console.drawio.html 2-2</strong>。</p><ul><li>UART（通用异步接收器和发射器）和 UART driver（UART 驱动）的功能简单的理解就是，将电传打字机的信号转换为计算机可以识别的信号。</li><li>line discipline（行规范） 的功能简单的理解就是，提供一个编辑缓冲区和一些基本的命令。比如：回车命令把缓冲区的数据发送给 TTY 驱动；退格命令清除一个字符。</li><li>TTY driver（终端驱动）的功能有两个：进行会话管理；处理终端设备的输入输出。</li></ul><h3 id=软件仿真终端>软件仿真终端</h3><p>这里用键盘和显示器（注意这里是直连）为例，画了基本的软硬件结构和交互。见图：<strong>terminal_console.drawio.html 20-2</strong>。</p><p>差别在于用键盘驱动、显示器驱动、终端模拟器替换了 UART 和 UART 驱动。基本流程不变，只是输入输出从一个设备变成两个设备了。</p><p>在 linux 系统中，软件仿真终端在文件系统中的表示就是 /dev/tty1 ~ /dev/tty6。见图：<strong>terminal_console.drawio.html 20-4</strong>。</p><p>在 ubuntu 系统中，在图形界面的桌面按下 &ldquo;CTRL&rdquo; + &ldquo;ALT&rdquo; + &ldquo;F1&rdquo; ~ &ldquo;F6&rdquo; 就可以分别进入 tty1 ~ tty6 对应的软件仿真终端。软件仿真终端的界面是操作系统内核直接提供的，这种叫虚拟控制台（virtual console）。</p><p>按下 &ldquo;CTRL&rdquo; + &ldquo;ALT&rdquo; + &ldquo;F7&rdquo; 或者重新启动系统，就可以回到图形界面。在图形界面也可以打开终端，这种叫终端窗口（terminal window），属于伪终端。终端窗口就是常用的那个控制台黑窗口。</p><p>这两中终端在功能上其实没啥区别，如果哪天操作系统的图形界面炸掉了，但是别的地方没问题，那倒是可以切到软件仿真终端去救火。</p><h3 id=伪终端>伪终端</h3><p>物理终端和软件模拟终端都需要直接连接外部设备，这两种方式对物理距离都是有限制的，伪终端（pseudo terminal，pty）的出现解决了这个问题。伪终端就是由终端模拟器提供的虚拟终端，终端模拟器是一种运行在用户空间的应用程序。</p><p>这里用 xterm 终端模拟器为例，画了基本的软件结构和交互。见图：<strong>terminal_console.drawio.html 40-2</strong>。</p><p>伪终端在操作系统内核中分为两部分：分别是不在 TTY 驱动中 PTY master side 和在 TTY 驱动中的 PTY slave side。master side 是接近用户的一端；slave side 是在虚拟终端上运行的 CLI（Command Line Interface，命令行接口）程序。</p><p>连接 master side 和 slave side 的是伪终端驱动。见图：<strong>terminal_console.drawio.html 40-4</strong>。</p><p>伪终端驱动会把写入 master side 的数据转发给 slave side 作为程序的输入。程序输出时会写入 slave side。伪终端驱动会把写入 slave side 的数据转发给 master side 作为可以读取的数据。</p><p>在 linux 系统中，当创建一个伪终端时。会调用 posix_openpt() 请求 ptmx 创建一个 pts。ptmx 就是 &ldquo;/dev/ptmx&rdquo;，对应 master side。创建出来的 pts 在 &ldquo;/dev/pts/&rdquo; 目录下，对应 slave side。</p><h4 id=ssh>ssh</h4><p>类似 PuTTY 这类通过 SSH 的方式远程连接到 linux 系统的终端模拟程序。如果从 linux 系统这边看的话，连接上来之后产生的用户进程，就是图 <strong>terminal_console.drawio.html 40-4</strong> 中 xterm process 的位置，它和 master side 交互。</p><p>建立连接的过程：</p><ul><li>客户端（PuTTY）请求和 sshd 建立连接。</li><li>sshd 验证通过后，会创建一个新的会话（session）。</li><li>sshd 调用 posix_openpt() 请求 ptmx 创建一个 pts。如果创建成功，sshd 会得到一个连接到 ptmx 的文件描述符（fd）和一个 pts。ptmx 会自动维护这个 fd 和 pts 的关系。</li><li>sshd 会把创建的会话和这个 fd（连接到 ptmx 的文件描述符）关联起来。同时 sshd 会创建 bash 进程，将 pts 和 bash 进程关联起来。</li></ul><p>用 lsof 命令可以查看 &ldquo;/dev/ptmx&rdquo; 被哪些进程打开了。如果 sshd 请求 ptmx 创建一个 pts 成功。那么输出里应该会有像下面这样 &lsquo;COMMAND 为 sshd，NAME 为 &ldquo;/dev/ptmx&rsquo; 的行。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>&gt; lsof /dev/ptmx
</span></span><span style=display:flex><span>COMMAND  PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
</span></span><span style=display:flex><span>sshd    1191  dev    8u   CHR    5,2      0t0 6531 /dev/ptmx
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>收发消息的过程：</p><ul><li>客户端（PuTTY）收到键盘的输入，通过 ssh 协议将数据发往 sshd。</li><li>sshd 收到客户端的数据后，从自己管理的会话里找到该客户端对应的 fd，然后将数据写入 fd。</li><li>ptmx 收到 sshd 的数据后，从自己管理的关系里找到该 fd 对应的 pts，然后将数据写入 pts。</li><li>pts 收到 ptmx 的数据后，检查关联的前端进程组，将数据转发给前端进程组的组长进程。因为上面是创建 bash 进程和 pts 关联起来的，所以这里就是 bash 收到了数据。</li><li>bash 收到 pts 的数据后，会对输入的数据进行处理，然后输出处理结果，输出的处理结果会被写入 pts。</li><li>pts 收到 bash 的数据后，将数据写入 ptmx。</li><li>ptmx 收到 pts 的数据后，从自己管理的关系里找到该 pts 对应的 fd，然后将数据写入 fd。</li><li>sshd 收到 fd 的数据后，从自己管理的会话里找到该 fd 对应的客户端，然后将数据发往客户端。</li></ul><p>见图：<strong>terminal_console.drawio.html 40-6</strong>。</p><h4 id=键盘和显示器>键盘和显示器</h4><p>图形界面出现之后，键盘和显示器的组合演变成了伪终端，整个结构和 ssh 的差不多。只不过没有远程连接了，图形客户端需要把 ssh 客户端的功能也实现，然后直接和 master side 交互。见图：<strong>terminal_console.drawio.html 40-8</strong>。</p><h3 id=tty>TTY</h3><p>TTY 也泛指计算机的终端设备，说 TTY 的时候可能是 tty 也可能是 pts，大部分情况下是 pts。</p><p>对于用户空间来说，这两个没有区别。对于内核来说，tty 的另一端连接的是终端模拟器，pts 的另一端连接的是 ptmx，终端模拟器和 ptmx 都只负责维护会话和转发数据。终端模拟器的另一端连接的是键盘和显示器这样等硬件。ptmx 的另一端连接的是用户空间的 xterm、sshd 等应用程序。</p><p>如果有多个终端连接上来的话，终端驱动会创建多个 TTY 与这些终端一一对应。见图：<strong>terminal_console.drawio.html 12-2</strong>。</p><p>在 linux 的终端窗口里使用 tty 命令可以查看当前 bash 关联到哪个 tty 或者 pts。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>&gt; tty
</span></span><span style=display:flex><span>/dev/pts/0
</span></span></code></pre></div><p>然后用 lsof 命令可以查看这个 tty 或者 pts 被哪些进程打开了。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>&gt; lsof /dev/pts/0
</span></span><span style=display:flex><span>COMMAND  PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
</span></span><span style=display:flex><span>bash    2150  qqq    0u   CHR  136,0      0t0    3 /dev/pts/0
</span></span><span style=display:flex><span>bash    2150  qqq    1u   CHR  136,0      0t0    3 /dev/pts/0
</span></span><span style=display:flex><span>bash    2150  qqq    2u   CHR  136,0      0t0    3 /dev/pts/0
</span></span><span style=display:flex><span>bash    2150  qqq  255u   CHR  136,0      0t0    3 /dev/pts/0
</span></span><span style=display:flex><span>lsof    2163  qqq    0u   CHR  136,0      0t0    3 /dev/pts/0
</span></span><span style=display:flex><span>lsof    2163  qqq    1u   CHR  136,0      0t0    3 /dev/pts/0
</span></span><span style=display:flex><span>lsof    2163  qqq    2u   CHR  136,0      0t0    3 /dev/pts/0
</span></span></code></pre></div><p>上面的 FD 这一列是文件描述符，0u、1u、2u 就是 stdin(0u)、stdout(1u)、stderr(2u)，即标准输入、标准输出、标准错误输出。</p><h2 id=参考reference>参考（reference）</h2><ul><li><a href=https://www.cnblogs.com/sparkdev/p/11460821.html title="Linux 终端(TTY)" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Linux 终端(TTY)
<i class="fa fa-external-link-alt"></i></a></li><li><a href=https://www.cnblogs.com/sparkdev/archive/2019/09/29/11605804.html title="Linux 伪终端(pty)" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Linux 伪终端(pty)
<i class="fa fa-external-link-alt"></i></a></li><li><a href=https://segmentfault.com/a/1190000009082089 title="Linux TTY/PTS概述" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Linux TTY/PTS概述
<i class="fa fa-external-link-alt"></i></a></li><li><a href=https://blog.csdn.net/ltx06/article/details/52170852 title=终端、虚拟终端、shell、控制台、tty的区别 rel="noopener external nofollow noreferrer" target=_blank class=exturl>终端、虚拟终端、shell、控制台、tty的区别
<i class="fa fa-external-link-alt"></i></a></li></ul></div><footer class=post-footer><div class=post-tags><a href=/tags/computer-science%e8%ae%a1%e7%ae%97%e6%9c%ba%e7%a7%91%e5%ad%a6>computer-science(计算机科学)</a>
<a href=/tags/linux>linux</a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=post-copyright><img src=/imgs/cc/cc.svg width=75 height=75 align=right><ul><li class=post-copyright-title><strong>文章标题：</strong>
终端和控制台</li><li class=post-copyright-author><strong>本文作者：</strong>
西柊慧音</li><li class=post-copyright-link><strong>本文链接：</strong>
<a id=post-cr-link href=/post/computer-science/terminal_console/ title=终端和控制台>/post/computer-science/terminal_console/</a></li><li class=post-copyright-license><strong>版权声明：</strong>
本博客所有文章除特别声明外，均采用 <i class="fab fa-fw fa-creative-commons"></i><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/computer-science/computer_system/ rel=next title=计算机系统系列笔记的导航><i class="fa fa-chevron-left"></i> 计算机系统系列笔记的导航</a></div><div class="post-nav-prev post-nav-item"><a href=/post/computer-science/hardware/cpu/ rel=prev title="中央处理器（Central Processing Unit、CPU）">中央处理器（Central Processing Unit、CPU）
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy;
<span itemprop=copyrightYear>2020 - 2023</span>
<span class=with-love><i class="fa fa-heart"></i></span>
<span class=author itemprop=copyrightHolder>西柊慧音</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.103.1 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.4.1 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div></div></footer><script type=text/javascript src=https://cdn.staticfile.org/animejs/3.2.1/anime.min.js defer></script>
<script type=text/javascript src=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.js defer></script>
<script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":true,"save":"manual"},"busuanzi":{"pageview":true},"copybtn":true,"darkmode":false,"giscus":{"cfg":{"category":"Comments","categoryid":null,"emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"username/repo-name","repoid":null,"theme":"preferred_color_scheme"},"js":"https://giscus.app/client.js"},"hostname":"/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"statis":{"enable":false,"plugin":"busuanzi"},"vendor":{"plugins":"qiniu","router":"https://cdn.staticfile.org"},"version":"4.4.1","waline":{"cfg":{"comment":true,"emoji":false,"imguploader":false,"pageview":false,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"serverurl":null,"sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"waline","file":"dist/waline.css","name":"@waline/client","version":"2.13.0"},"js":{"alias":"waline","file":"dist/waline.js","name":"@waline/client","version":"2.13.0"}}}</script><script type=text/javascript src=/js/main.min.c997eeae723f2fcee19ae5066fcc64a49cefb92ddb75904efdb69a223e5a6740.js defer></script></body></html>