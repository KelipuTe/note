<!doctype html><html lang=zh-cn data-theme=light><head><meta charset=utf-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#222" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.103.1"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32_32_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="分布式事务"><meta itemprop=description content><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="/image/pid49256268.jpg"><meta itemprop=keywords content="computer-science(计算机科学),architecture-design(架构设计),distributed-system(分布式系统),transaction(事务)"><meta property="og:type" content="article"><meta property="og:title" content="分布式事务"><meta property="og:description" content><meta property="og:image" content="/image/pid49256268.jpg"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="/post/architecture-design/distributed-system/transaction/"><meta property="og:site_name" content="帕里特档案馆"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="西柊慧音"><meta property="article:published_time" content="2022-06-03 08:00:00 +0800 CST"><meta property="article:modified_time" content="2022-06-03 08:00:00 +0800 CST"><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.css><link rel=stylesheet href=/css/main.min.4da9279b6033ade10d67092d7bfb660265f9fa46c40974f17b13bfe235396546.css><style type=text/css>.post-footer,.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":false,"isHome":false,"isPage":true,"path":"transaction","permalink":"/post/architecture-design/distributed-system/transaction/","title":"分布式事务","waline":{"js":[{"alias":"waline","alias_name":"@waline/client","file":"dist/pageview.js","name":"pageview","version":"2.13.0"},{"alias":"waline","alias_name":"@waline/client","file":"dist/comment.js","name":"comment","version":"2.13.0"}]}}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>分布式事务 - 帕里特档案馆</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label=切换导航栏 role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>帕里特档案馆</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>重建中</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/about/ class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>107</span></a></li><li class="menu-item menu-item-commonweal"><a href=/404.html class=hvr-icon-pulse rel=section><i class="fa fa-heartbeat hvr-icon"></i>公益 404</a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><ul><li><a href=#经典的转账问题>经典的转账问题</a></li><li><a href=#事务消息>事务消息</a><ul><li><a href=#尽力而为>尽力而为</a></li><li><a href=#事务性发件箱>事务性发件箱</a></li><li><a href=#轮询发布器>轮询发布器</a></li><li><a href=#事务日志跟踪>事务日志跟踪</a></li></ul></li><li><a href=#幂等>幂等</a></li><li><a href=#两阶段提交协议>两阶段提交协议</a></li><li><a href=#两阶段提交--事务消息>两阶段提交 + 事务消息</a></li><li><a href=#seata-2pc>Seata 2PC</a></li><li><a href=#tcc>TCC</a></li><li><a href=#微服务的分布式事务模型>微服务的分布式事务模型</a></li><li><a href=#参考>参考</a></li></ul></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=西柊慧音 src=/imgs/img-lazy-loading.gif data-src=/image/pid49256268.jpg><p class=site-author-name itemprop=name>西柊慧音</p><div class=site-description itemprop=description></div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>107</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>19</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>67</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/KelipuTe title="Github → https://github.com/KelipuTe" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>Github</a></span>
<span class=links-of-social-item><a href=xhy_1365@sina.com title="E-Mail → xhy_1365@sina.com" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-envelope fa-fw hvr-icon"></i>E-Mail</a></span></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh class=cc-opacity rel=noopener target=_blank title=共享知识><img src=/imgs/img-lazy-loading.gif data-src=/imgs/cc/big/by_nc_sa.svg alt=共享知识></a></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://gitee.com/hugo-next/hugo-theme-next title=https://gitee.com/hugo-next/hugo-theme-next target=_blank>Hugo-NexT</a></li><li class=links-of-blogroll-item><a href=https://lisenhui.cn title=https://lisenhui.cn target=_blank>凡梦星尘空间站</a></li></ul></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a>
<a href=https://github.com/hugo-next rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=/post/architecture-design/distributed-system/transaction/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/image/pid49256268.jpg"><meta itemprop=name content="西柊慧音"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="西柊慧音"><meta itemprop=description content></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="分布式事务"><meta itemprop=description content="分布式事务"></span><header class=post-header><h1 class=post-title itemprop="name headline">分布式事务</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i></span>
<span class=post-meta-item-text>发表于：</span>
<time title="发表于：2022-06-03 08:00:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2022-06-03 08:00:00 +0800 CST">2022-06-03</time></span>
<span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i></span>
<span class=post-meta-item-text>分类于：</span>
<span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/application%E5%BA%94%E7%94%A8 itemprop=url rel=index><span itemprop=name>application(应用)</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=字数><span class=post-meta-item-icon><i class="far fa-file-word"></i></span>
<span class=post-meta-item-text>字数：</span><span>2734</span></span>
<span class=post-meta-item title=阅读><span class=post-meta-item-icon><i class="far fa-clock"></i></span>
<span class=post-meta-item-text>阅读：&ap;</span>
<span>6分钟</span></span>
<span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="far fa-eye"></i></span>
<span class=post-meta-item-text>浏览：</span>
<span id=busuanzi_value_page_pv data-path=/post/architecture-design/distributed-system/transaction/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class="post-body autonumber" itemprop=articleBody><h3 id=经典的转账问题>经典的转账问题</h3><ul><li>支付宝账户表：A （id, user_id, amount）</li><li>余额宝账户表：B （id, user_id, amount）</li></ul><p>用户的 user_id = 1，从支付宝转帐 1 万快到余额宝分为两个步骤：</p><ul><li>1、支付宝表扣除 1 万：<code>UPDATE A SET amount = amount - 10000WHERE user_id = 1;</code></li><li>2、余额宝表增加 1 万：<code>UPDATE B SET amount = amount + 10000WHERE user_id = 1;</code></li></ul><p>如果两个表在同一个数据库中，那么使用数据库事务就可以保证数据一致性。但是如果这两个表不在同一个数据库中，数据库事务这个方案就不能使用了，这个时候就需要使用分布式事务的解决方案。</p><h3 id=事务消息>事务消息</h3><p>类似场景：付款点餐->获取小票->叫号取餐</p><p>支付宝表扣除 1 万后（付款点餐），生成一条余额宝表增加 1 万的消息（获取小票）。只要这条消息能被可靠的保存下来并且正确的消费掉（叫号取餐），就可以实现两个表数据的最终一致性。</p><h4 id=尽力而为>尽力而为</h4><p>事务消息一旦被可靠的持久化，整个分布式事务，就变为实现最终一致性。</p><p>尽力而为（Best Effort）：消息正确消费后业务数据才完整，所以要尽最大努力，把消息送达到下游的消费方。常用的方案就是在消息成功送达下游前，不停地重试，直到下游成功返回结果。</p><p>上游系统可以根据下游消费消息后返回的结果，决定分布式事务到底是成功（提交）还是失败（回滚）。只有消息被消费，整个分布式事务才算是完整结束。</p><p>特别需要注意的是：所有的尽力送达的模型，都必须预扣资源。因为尽力送达后返回的结果不一定是成功，如果不预扣资源，可能就无法完成回滚操作（回滚的时候资源不够扣除）。</p><h4 id=事务性发件箱>事务性发件箱</h4><p>事务性发件箱（Transactional Outbox）：业务数据与消息数据保存在同一数据库实例里，数据库事务能保证只要支付宝表里被扣了钱，消息表一定会产生与之对应的消息数据。</p><p>当上述事务提交成功后，想办法将此消息通知余额宝，余额宝处理成功后发送回复成功消息，支付宝收到回复后删除该条消息数据。</p><h4 id=轮询发布器>轮询发布器</h4><p>轮询发布器（Polling publisher）：安排一个独立的服务，定时的轮训消息表，把没有被消费的消息拿出来按 id 自增主键的顺序依次消费，这样可以保证消息的消费是有序的。</p><p>轮询的方式，会对数据库造成一定的压力。但是如果轮询的频次不够，又会有一定的延迟。</p><h4 id=事务日志跟踪>事务日志跟踪</h4><p>事务性发件箱的方式需要额外维护消息表，而且使得业务和消息耦合在了一起，不方便扩展。</p><p>事务日志跟踪（Transaction log tailing）：通过中间件订阅数据库日志，进而分析业务数据得到消息。或者使用一些业务场景自带的消息表（比如订单详情、交易流水等）。同样可以实现事务消息模型。</p><h3 id=幂等>幂等</h3><p>分布式事务一定伴随着重试，所以业务系统一定要做幂等，保证每条消息只会被消费一次。</p><p>通常的做法是上下游约定全局唯一的消息 ID，这样双方进行交互时，就可以通过消息 ID 判断消息是否被消费过。</p><p>类似的处理思路还有版本号，通过给数据打上版本号，就可以判断数据是过期的数据还是新的数据。</p><h3 id=两阶段提交协议>两阶段提交协议</h3><p>两阶段提交协议（2PC、Two Phase Commitment Protocol）涉及到两种角色。</p><ul><li>一个或多个事务参与者（participants）也可以叫资源管理器（RM、Resource Manager）：本地事务执行者。</li><li>一个事务协调者（coordinator）也可以叫事务管理器（TM、Transaction Manager）：协调多个参与者进行事务投票、提交、回滚。</li></ul><p>两阶段提交的步骤分为两步：</p><ul><li>投票阶段（voting phase）：协调者通知事务参与者准备提交或取消事务，然后进入表决过程。参与者将告知协调者自己是同意（本地事务执行成功，但未提交）还是反对（本地事务执行失败）。</li><li>提交阶段（commit phase）：收到参与者的通知后，协调者再向参与者发出通知，根据反馈情况决定各参与者是否要提交还是回滚。</li></ul><h3 id=两阶段提交--事务消息>两阶段提交 + 事务消息</h3><ul><li>1、上游业务系统通知消息中间件，进入准备阶段</li></ul><p>相当于上游系统去消息中间件那里做一个登记，表示要开始一个分布式事务。</p><ul><li>2、消息中间件返回准备阶段成功后，上游业务系统执行本地事务</li></ul><p>消息中间件返回登记成功的时候，上游系统才能开始分布式事务的操作。</p><ul><li>3、上游业务系统通知消息中间件本地事务执行结果</li></ul><p>上游业务系统，如果本地事务执行成功，就通知消息中间件可以进行下一步操作；如果本地事务执行失败，就通知消息中间件进行回滚操作，通常也就是终止本次分布式事务。</p><p>如果消息中间件没有等到上游业务系统的通知，就会主动发起查询。借助第一步的登记信息，就可以询问上游业务系统本地事务执行的结果。</p><ul><li>4、如果上游业务系统本地事务执行成功，消息中间件就会设法将消息发送给下游消费系统</li></ul><p>如果上游业务系统本地事务执行成功，那么消息中间件就需要保证这条消息一定要被下游消费系统消费掉。如果下游消费系统没有响应，消息中间件就会不停地重试。</p><ul><li>5、在收到消息后，下游消费系统执行本地事务</li><li>6、下游消费系统通知消息中间件本地事务执行结果</li></ul><p>这个模型中，下游消费系统只会返回成功给消息中间件，这样消息中间件就可以结束本次分布式事务。如果下游消费系统本地事务执行失败了，通常会由人工介入修正数据，因为即使失败了，这个时候也是不能回滚的，回滚操作复杂度太高。</p><p>同样的，这个步骤如果消息中间件没有等到下游消费系统的通知，也会主动发起查询。</p><h3 id=seata-2pc>Seata 2PC</h3><p>Seata 2PC 和传统 2PC 的区别在于：</p><ul><li>传统 2PC 依赖数据库提供事务，Seata 2PC 是个服务，更符合微服务的思想。</li><li>传统 2PC 一直要等到提交阶段结束才会释放锁，Seata 2PC 在准备阶段结束就会释放锁。</li></ul><h3 id=tcc>TCC</h3><p>TCC 是 try、confirm、cancel 三个词语的缩写。TCC 要求每个分支事务都要提供三个接口：预处理（try）、确认（confirm）、撤销（cancel）。try 操作做业务检查及资源预留，confirm 做业务确认操作，cancel 实现一个与 try 相反的操作即回滚操作。</p><p>TM 首先发起所有的分支事务的 try 操作，任何一个分支事务的 try 操作执行失败，TM 将会发起所有分支事务的 cancel 操作。</p><p>若 try 操作全部成功，TM 将会发起所有分支事务的 confirm 操作，其中 confirm/cancel 操作若执行失败，TM 会进行重试。因为资源预留操作，重试可以认为是一定可以成功的，所以会一直重试直到成功。</p><p>需要注意空回滚和防悬挂的问题。</p><ul><li>空回滚指的是 try 操作可能没有执行，这时 cancel 操作要能正确执行。</li><li>防悬挂指的是由于网络原因，cancel 操作在 try 操作之前到达了，这时要能识别出这个 try 操作是无效的。</li></ul><h3 id=微服务的分布式事务模型>微服务的分布式事务模型</h3><ul><li>事件驱动模型（Event sourcing）：A 服务产生一个事件，B 服务订阅 A 服务的事件；然后B 服务又产生一个事件，C 服务订阅 B 服务的事件，就这样串下去。</li><li>Saga（编排模型）：A 服务直接调用一个集中的分布式事务编排服务，由事务编排服务去调用 B 服务、C 服务。</li></ul><p>不管是哪一种分布式事务模型，都需要考虑万一分布式事务失败了的回滚问题。</p><h3 id=参考>参考</h3><ul><li>极客时间：Go 进阶训练营</li></ul></div><footer class=post-footer><div class=post-tags><a href=/tags/computer-science%e8%ae%a1%e7%ae%97%e6%9c%ba%e7%a7%91%e5%ad%a6>computer-science(计算机科学)</a>
<a href=/tags/architecture-design%e6%9e%b6%e6%9e%84%e8%ae%be%e8%ae%a1>architecture-design(架构设计)</a>
<a href=/tags/distributed-system%e5%88%86%e5%b8%83%e5%bc%8f%e7%b3%bb%e7%bb%9f>distributed-system(分布式系统)</a>
<a href=/tags/transaction%e4%ba%8b%e5%8a%a1>transaction(事务)</a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=post-copyright><img src=/imgs/cc/cc.svg width=75 height=75 align=right><ul><li class=post-copyright-title><strong>文章标题：</strong>
分布式事务</li><li class=post-copyright-author><strong>本文作者：</strong>
西柊慧音</li><li class=post-copyright-link><strong>本文链接：</strong>
<a id=post-cr-link href=/post/architecture-design/distributed-system/transaction/ title=分布式事务>/post/architecture-design/distributed-system/transaction/</a></li><li class=post-copyright-license><strong>版权声明：</strong>
本博客所有文章除特别声明外，均采用 <i class="fab fa-fw fa-creative-commons"></i><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/computer-science/application/vmware/windows/ rel=next title="在 Windows 中安装 VMware 的产品"><i class="fa fa-chevron-left"></i> 在 Windows 中安装 VMware 的产品</a></div><div class="post-nav-prev post-nav-item"><a href=/post/computer-science/cache/cache/ rel=prev title=缓存>缓存
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy;
<span itemprop=copyrightYear>2020 - 2023</span>
<span class=with-love><i class="fa fa-heart"></i></span>
<span class=author itemprop=copyrightHolder>西柊慧音</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.103.1 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.4.1 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div></div></footer><script type=text/javascript src=https://cdn.staticfile.org/animejs/3.2.1/anime.min.js defer></script>
<script type=text/javascript src=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.js defer></script>
<script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":true,"save":"manual"},"busuanzi":{"pageview":true},"copybtn":true,"darkmode":false,"giscus":{"cfg":{"category":"Comments","categoryid":null,"emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"username/repo-name","repoid":null,"theme":"preferred_color_scheme"},"js":"https://giscus.app/client.js"},"hostname":"/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"statis":{"enable":false,"plugin":"busuanzi"},"vendor":{"plugins":"qiniu","router":"https://cdn.staticfile.org"},"version":"4.4.1","waline":{"cfg":{"comment":true,"emoji":false,"imguploader":false,"pageview":false,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"serverurl":null,"sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"waline","file":"dist/waline.css","name":"@waline/client","version":"2.13.0"},"js":{"alias":"waline","file":"dist/waline.js","name":"@waline/client","version":"2.13.0"}}}</script><script type=text/javascript src=/js/main.min.c997eeae723f2fcee19ae5066fcc64a49cefb92ddb75904efdb69a223e5a6740.js defer></script></body></html>