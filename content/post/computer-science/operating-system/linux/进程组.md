---
draft: false
date: 2023-12-04 08:00:00 +0800
title: "进程组"
summary: "进程组；"
toc: true

categories:
  - 操作系统

tags:
  - 计算机科学
  - 操作系统
  - Linux
---

## 反向链接

[进程](/post/computer-science/operating-system/linux/进程)；

## 正文

### 进程组

- 进程 id、process id、pid；
- 进程组、process group；
- 进程组 id、process group id、pgid；

进程组是一个或者多个进程的集合。
每个进程必须而且只能属于一个进程组。集合里的这些进程并不是孤立的，它们之间会存在父子或者兄弟的关系。
进程有自己的唯一标识，称为进程 id，进程组也有自己的唯一标识，称为进程组 id。

每个进程组都有一个组长进程，组长进程的 pid 与其 pgid 相同。组长进程可以创建一个进程组，一般是进程变成组长进程的时候。

进程组的生命周期从被创建开始，直到进程组内所有进程终止或离开该组。
无论组长进程是否终止，只要进程组中存在未终止的进程，这个进程组就不会消失。
组长进程终止后，进程组中便不存在组长进程，剩下的进程也不会自动推选新的组长进程。

进程组的作用是为了方便对进程进行管理。
假设有一个任务需要好多进程一起协作完成，现在出于某种原因需要终止这个任务。
如果没有进程组，就需要用 pid 一个一个杀掉这些进程，而且还要考虑顺序，先杀子进程再杀父进程。
如果有进程组的话，就可以搞一个杀进程组的操作。

通过 getpgid() 或者 getpgrp() 可以获取进程所属的进程组 id。通过 setpgid() 可以设置进程的进程组 id。
进程通过 setpgid() 只能设置它自己和它的子进程的 ppid。
如果它的子进程调用了 exec 家族的函数，那么它也无法更改这个子进程的 ppid 了。

创建出来的子进程一开始是和父进程是一组的，会继承父进程的 pgid。
可以通过把子进程的 pgid 设置成子进程的 pid，来创建以子进程为组长进程的新进程组。
