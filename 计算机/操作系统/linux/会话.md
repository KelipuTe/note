---
draft: false
date: 2023-06-10 08:00:00 +0800
title: "会话"
summary: "会话；"
toc: true

categories:
  - Linux

tags:
  - 计算机
  - 操作系统
  - Linux
---

## 反向链接

[进程组](/计算机/操作系统/linux/进程组)；
[控制进程](/计算机/操作系统/linux/控制进程)；

## 正文

### 会话

- 会话、session；
- 会话 id、session id、sid；
- 会话首进程；session leader；

Linux 是一个多用户多任务的分时操作系统。多用户是指多个用户可以在同一时间使用计算机系统。一个用户登录一次系统就形成一个会话。

会话是多个进程组的集合，一个会话中可以包含一个前台进程组以及一个或多个后台进程组。
每个会话都有会话 id。每个会话都有一个会话首进程，即创建会话的进程。

一个会话可以关联终端，也可以不关联终端，关联终端的时候只能关联一个。
这个终端一般由会话首进程建立连接。此时，会话首进程也叫控制进程，这个终端也叫控制终端。

一个会话关联了一个终端后，它至少有一个前台进程组，其它都是后台进程组。
在终端输入特殊字符，如：中断键（"ctrl + c"）、暂停键（"ctrl + z"）、退出键（"ctrl + \\"）时，会产生中断信号。
中断信号会往前台进程组里的所有进程发送，但是不会给后台进程组里的进程发送。

通过 getsid() 可以获取会话 id，通过 setsid() 可以设置会话 id。
当一个进程调用 setsid() 时，会发生三件事：该进程会变成会话首进程；
该进程会变成进程组的组长；该进程不会关联终端，就算父进程有终端也会断开（后面可以再关联终端）。
必须注意的是，只有当前进程不是进程组的组长时，才能创建一个新的会话，成为新会话的会话首进程。
